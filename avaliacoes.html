<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <!-- Configurações básicas da página -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avaliações - NavCode</title>

    <!-- Importando estilos e fontes -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- ===== BOTÃO DE ALTERNÂNCIA DE TEMA ===== -->
    <button class="theme-toggle" id="theme-toggle" data-tooltip="Alternar Tema" onclick="toggleTheme()">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5" />
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
        </svg>
    </button>

    <!-- ===== CABEÇALHO PRINCIPAL ===== -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <!-- Título principal com logo clicável -->
                <div class="header-title">
                    <!-- Logo NavCode clicável que leva ao home -->
                    <div class="brand-logo" onclick="window.location.href='home.html'">
                        <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
                        </svg>
                        <span class="brand-name">NavCode</span>
                    </div>
                    
                    <!-- Ícone de estrela para avaliações -->
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" />
                    </svg>
                    <h1>Avaliações dos Estudantes</h1>
                </div>
                
                <!-- Descrição da página -->
                <p class="header-description">
                    Veja o que nossos alunos estão dizendo sobre os cursos NavCode e compartilhe sua própria experiência.
                </p>

                <!-- Menu de navegação -->
                <nav class="main-navigation">
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="home.html" class="nav-link">
                                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                                    <polyline points="9,22 9,12 15,12 15,22" />
                                </svg>
                                Home
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" onclick="accessCourses(); return false;">
                                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
                                </svg>
                                Cursos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="professor.html" class="nav-link">
                                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                                    <circle cx="12" cy="7" r="4" />
                                </svg>
                                Professor
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="nossa-empresa.html" class="nav-link">
                                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 21h18" />
                                    <path d="M5 21V7l8-4v18" />
                                    <path d="M19 21V11l-6-4" />
                                </svg>
                                Empresa
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="criadores.html" class="nav-link">
                                <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                                    <circle cx="9" cy="7" r="4" />
                                    <path d="M22 21v-2a4 4 0 0 0-3-3.87" />
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                                </svg>
                                Criadores
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- ===== CONTEÚDO PRINCIPAL ===== -->
    <main class="main-content">
        <div class="container">
            
            <!-- ===== SEÇÃO DE AVALIAÇÕES EXISTENTES ===== -->
            <div class="reviews-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <!-- Ícone de estrela para avaliações -->
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" />
                        </svg>
                        Avaliações dos Estudantes
                    </h2>
                    <p class="card-description">
                        Veja o que nossos alunos estão dizendo sobre os cursos NavCode
                    </p>
                </div>
                <div class="card-content">
                    <!-- Grid das avaliações existentes -->
                    <div class="reviews-grid" id="reviews-grid">
                        <!-- Avaliações serão carregadas dinamicamente -->
                    </div>
                </div>
            </div>

            <!-- ===== SEÇÃO PARA NOVA AVALIAÇÃO ===== -->
            <div class="reviews-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <!-- Ícone de edição para nova avaliação -->
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        </svg>
                        Deixe sua Avaliação
                    </h2>
                    <p class="card-description">
                        Compartilhe sua experiência com os cursos NavCode
                    </p>
                </div>
                <div class="card-content">
                    <!-- Formulário para nova avaliação (visível apenas quando logado) -->
                    <div class="review-form" id="review-form" style="display: none;">
                        <h3>Deixe sua Avaliação</h3>

                        <!-- Seletor de estrelas -->
                        <div class="star-rating" id="star-rating">
                            <!-- Estrelas clicáveis para avaliação -->
                            <svg class="star-input" data-rating="1" viewBox="0 0 24 24" onclick="setRating(1)">
                                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" />
                            </svg>
                            <svg class="star-input" data-rating="2" viewBox="0 0 24 24" onclick="setRating(2)">
                                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" />
                            </svg>
                            <svg class="star-input" data-rating="3" viewBox="0 0 24 24" onclick="setRating(3)">
                                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" />
                            </svg>
                            <svg class="star-input" data-rating="4" viewBox="0 0 24 24" onclick="setRating(4)">
                                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" />
                            </svg>
                            <svg class="star-input" data-rating="5" viewBox="0 0 24 24" onclick="setRating(5)">
                                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" />
                            </svg>
                        </div>

                        <!-- Campo de texto para comentário -->
                        <textarea class="review-textarea" id="review-text"
                            placeholder="Compartilhe sua experiência com os cursos NavCode..." maxlength="500">
                        </textarea>

                        <!-- Botão para enviar avaliação -->
                        <button class="btn btn-primary" onclick="submitReview()">
                            Enviar Avaliação
                        </button>
                    </div>

                    <!-- Mensagem para usuários não logados -->
                    <div class="login-required" id="login-required">
                        <div class="login-message">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                                <polyline points="10,17 15,12 10,7"/>
                                <line x1="15" y1="12" x2="3" y2="12"/>
                            </svg>
                            <h3>Faça Login para Avaliar</h3>
                            <p>Você precisa estar logado para deixar uma avaliação sobre nossos cursos.</p>
                            <a href="login.html" class="btn btn-primary">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                                    <polyline points="10,17 15,12 10,7"/>
                                    <line x1="15" y1="12" x2="3" y2="12"/>
                                </svg>
                                Fazer Login
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ===== RODAPÉ ===== -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <!-- Coluna 1: Logo e descrição -->
                <div class="footer-column">
                    <div class="footer-brand">
                        <div class="brand-logo" onclick="window.location.href='home.html'">
                            <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
                            </svg>
                            <span class="brand-name">NavCode</span>
                        </div>
                        <p class="footer-description">
                            Transformando carreiras através da educação em tecnologia da informação.
                        </p>
                    </div>
                </div>
                
                <!-- Coluna 2: Cursos -->
                <div class="footer-column">
                    <h3 class="footer-title">Cursos</h3>
                    <ul class="footer-links">
                        <li><a href="curso-informatica.html">Técnico em Informática</a></li>
                        <li><a href="curso-web.html">Desenvolvimento Web</a></li>
                        <li><a href="curso-seguranca.html">Segurança da Informação</a></li>
                        <li><a href="curso-python.html">Programação Python</a></li>
                        <li><a href="curso-redes.html">Redes de Computadores</a></li>
                        <li><a href="curso-banco-dados.html">Banco de Dados</a></li>
                    </ul>
                </div>
                
                <!-- Coluna 3: Empresa -->
                <div class="footer-column">
                    <h3 class="footer-title">Empresa</h3>
                    <ul class="footer-links">
                        <li><a href="nossa-empresa.html">Sobre Nós</a></li>
                        <li><a href="criadores.html">Nosso Time</a></li>
                        <li><a href="nossa-empresa.html#contato">Contato</a></li>
                        <li><a href="avaliacoes.html">Avaliações</a></li>
                    </ul>
                </div>
                
                <!-- Coluna 4: Suporte -->
                <div class="footer-column">
                    <h3 class="footer-title">Suporte</h3>
                    <ul class="footer-links">
                        <li><a href="nossa-empresa.html#suporte">Central de Ajuda</a></li>
                        <li><a href="nossa-empresa.html#faq">FAQ</a></li>
                        <li><a href="nossa-empresa.html#politica">Política de Privacidade</a></li>
                        <li><a href="nossa-empresa.html#termos">Termos de Uso</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Linha de copyright -->
            <div class="footer-bottom">
                <p>&copy; 2024 NavCode. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- ===== SCRIPTS ===== -->
    <!-- Importando sistema de autenticação -->
    <script src="auth.js"></script>

    <!-- Importando sistema de temas -->
    <script src="theme-system.js"></script>

    <!-- Script principal da página -->
    <script>
        // ===== VARIÁVEIS GLOBAIS =====
        // Variável para armazenar avaliação atual
        let currentRating = 0;

        // ===== FUNÇÕES DE INICIALIZAÇÃO =====
        /**
         * Função executada quando a página carrega
         * Verifica autenticação e carrega conteúdo apropriado
         */
        document.addEventListener('DOMContentLoaded', function () {
            console.log('[NavCode] Inicializando página de avaliações...');

            // Verificar se usuário está logado
            checkAuthenticationStatus();

            // Carregar avaliações existentes
            loadReviews();

            console.log('[NavCode] Página de avaliações inicializada com sucesso!');
        });

        // ===== FUNÇÕES DE AUTENTICAÇÃO =====
        /**
         * Verifica status de autenticação e ajusta interface
         */
        function checkAuthenticationStatus() {
            const isLoggedIn = localStorage.getItem('navcode_logged_in') === 'true';
            const reviewForm = document.getElementById('review-form');
            const loginRequired = document.getElementById('login-required');

            if (isLoggedIn) {
                // Usuário logado - mostrar formulário de avaliação
                reviewForm.style.display = 'block';
                loginRequired.style.display = 'none';
            } else {
                // Usuário não logado - mostrar mensagem de login
                reviewForm.style.display = 'none';
                loginRequired.style.display = 'block';
            }
        }

        // ===== SISTEMA DE AVALIAÇÕES =====
        /**
         * Carrega avaliações existentes dos usuários
         */
        function loadReviews() {
            const reviewsGrid = document.getElementById('reviews-grid');

            // Avaliações de exemplo (em produção, viria do backend)
            const sampleReviews = [
                {
                    name: "Maria Silva",
                    rating: 5,
                    date: "15/12/2024",
                    text: "Excelente plataforma! Os cursos são muito bem estruturados e o conteúdo é de alta qualidade. Recomendo para quem quer se especializar em tecnologia."
                },
                {
                    name: "João Santos",
                    rating: 4,
                    date: "10/12/2024",
                    text: "Muito bom! Aprendi bastante com o curso de Informática. Os exercícios práticos ajudam muito na fixação do conteúdo."
                },
                {
                    name: "Ana Costa",
                    rating: 5,
                    date: "05/12/2024",
                    text: "A NavCode superou minhas expectativas. Metodologia excelente e suporte sempre disponível. Já estou no segundo curso!"
                },
                {
                    name: "Pedro Oliveira",
                    rating: 5,
                    date: "28/11/2024",
                    text: "Cursos completos e didáticos. A equipe de suporte é muito atenciosa e responde rapidamente às dúvidas."
                },
                {
                    name: "Carla Mendes",
                    rating: 4,
                    date: "22/11/2024",
                    text: "Ótima experiência de aprendizado. O material é atualizado e os exercícios práticos são muito úteis."
                },
                {
                    name: "Rafael Santos",
                    rating: 5,
                    date: "18/11/2024",
                    text: "Recomendo a NavCode! Os cursos são de excelente qualidade e me ajudaram muito na minha carreira profissional."
                }
            ];

            // Carregar avaliações salvas no localStorage
            const savedReviews = JSON.parse(localStorage.getItem('navcode_reviews') || '[]');
            const allReviews = [...sampleReviews, ...savedReviews];

            // Criar HTML para cada avaliação
            reviewsGrid.innerHTML = '';
            allReviews.forEach(review => {
                const reviewCard = createReviewCard(review);
                reviewsGrid.appendChild(reviewCard);
            });
        }

        /**
         * Cria elemento HTML para uma avaliação
         * @param {Object} review - Dados da avaliação
         * @returns {HTMLElement} - Elemento da avaliação
         */
        function createReviewCard(review) {
            const card = document.createElement('div');
            card.className = 'review-card';

            // Gerar iniciais do nome para avatar
            const initials = review.name.split(' ').map(n => n[0]).join('').toUpperCase();

            card.innerHTML = `
                <div class="review-header">
                    <div class="review-avatar">${initials}</div>
                    <div class="review-info">
                        <h4>${review.name}</h4>
                        <div class="review-date">${review.date}</div>
                    </div>
                </div>
                <div class="review-stars">
                    ${createStarsHTML(review.rating)}
                </div>
                <p class="review-text">"${review.text}"</p>
            `;

            return card;
        }

        /**
         * Cria HTML das estrelas para avaliação
         * @param {number} rating - Nota de 1 a 5
         * @returns {string} - HTML das estrelas
         */
        function createStarsHTML(rating) {
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                const filled = i <= rating ? 'star' : 'star empty';
                starsHTML += `
                    <svg class="${filled}" viewBox="0 0 24 24">
                        <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/>
                    </svg>
                `;
            }
            return starsHTML;
        }

        /**
         * Define avaliação quando usuário clica nas estrelas
         * @param {number} rating - Nota selecionada
         */
        function setRating(rating) {
            currentRating = rating;

            // Atualizar visual das estrelas
            const stars = document.querySelectorAll('.star-input');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        /**
         * Envia nova avaliação do usuário
         */
        function submitReview() {
            const reviewText = document.getElementById('review-text').value.trim();
            const currentUser = getCurrentUser();

            // Validações
            if (!currentUser) {
                alert('Você precisa estar logado para avaliar!');
                return;
            }

            if (currentRating === 0) {
                alert('Por favor, selecione uma avaliação de 1 a 5 estrelas!');
                return;
            }

            if (reviewText.length < 10) {
                alert('Por favor, escreva um comentário com pelo menos 10 caracteres!');
                return;
            }

            // Criar nova avaliação
            const newReview = {
                name: currentUser.username,
                rating: currentRating,
                date: new Date().toLocaleDateString('pt-BR'),
                text: reviewText
            };

            // Salvar no localStorage
            const savedReviews = JSON.parse(localStorage.getItem('navcode_reviews') || '[]');
            savedReviews.unshift(newReview); // Adicionar no início
            localStorage.setItem('navcode_reviews', JSON.stringify(savedReviews));

            // Limpar formulário
            document.getElementById('review-text').value = '';
            currentRating = 0;
            document.querySelectorAll('.star-input').forEach(star => {
                star.classList.remove('active');
            });

            // Recarregar avaliações
            loadReviews();

            alert('Avaliação enviada com sucesso! Obrigado pelo seu feedback!');
        }

        // ===== FUNÇÕES AUXILIARES =====
        /**
         * Verifica se usuário está logado
         * @returns {boolean} - Status de login
         */
        function isUserLoggedIn() {
            return localStorage.getItem('navcode_logged_in') === 'true';
        }

        // Função para verificar autenticação antes de acessar cursos
        function accessCourses() {
            const isLoggedIn = localStorage.getItem('navcode_logged_in') === 'true';
            
            if (!isLoggedIn) {
                alert('Você precisa fazer login para acessar os cursos NavCode!');
                window.location.href = 'login.html';
                return;
            }
            
            // Se estiver logado, redirecionar para página de cursos
            window.location.href = 'cursos.html';
        }

        // ===== LOG DE INICIALIZAÇÃO =====
        console.log('[NavCode] Sistema de avaliações inicializado');
        console.log('[NavCode] Funcionalidades: Autenticação, Carregamento de Avaliações, Envio de Avaliações');
    </script>

    <!-- Importando sistema de temas -->
    <script src="theme-system.js"></script>
</body>

</html>
